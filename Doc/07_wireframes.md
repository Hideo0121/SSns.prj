# ワイヤーフレーム

このセクションでは、アプリケーションの各画面のワイヤーフレームを記述します。レイアウト、コンポーネント配置、機能要素の位置関係を明確にします。

## ワイヤーフレーム作成ガイドライン

- **画面サイズ**: デスクトップ (1920x1080)、タブレット (768x1024)、スマートフォン (375x667) を想定
- **グリッドシステム**: 12カラムグリッドを基準とした配置
- **UI要素**: Material-UIコンポーネントを前提とした設計
- **レスポンシブ**: 各デバイスサイズでの表示を考慮

---

## 1. 認証画面

### レイアウト概要
```
┌─────────────────────────────────────────────────────────────┐
│                        Header                                │
│                     [アプリ名/ロゴ]                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│                   ┌─────────────────────┐                   │
│                   │                     │                   │
│                   │    ログインフォーム      │                   │
│                   │                     │                   │
│                   │  ┌───────────────┐   │                   │
│                   │  │ ユーザーコード   │   │                   │
│                   │  │ [input field]  │   │                   │
│                   │  └───────────────┘   │                   │
│                   │                     │                   │
│                   │  ┌───────────────┐   │                   │
│                   │  │ パスワード      │   │                   │
│                   │  │ [input field]  │   │                   │
│                   │  └───────────────┘   │                   │
│                   │                     │                   │
│                   │  ┌───────────────┐   │                   │
│                   │  │  [ログイン]     │   │                   │
│                   │  └───────────────┘   │                   │
│                   │                     │                   │
│                   │  [エラーメッセージ]     │                   │
│                   │                     │                   │
│                   └─────────────────────┘                   │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│                        Footer                               │
└─────────────────────────────────────────────────────────────┘
```

### コンポーネント詳細

**Header**
- アプリケーション名/ロゴ
- 高さ: 64px
- 背景色: 青の濃淡 (#1565c0 - #1976d2)
- テキスト色: 白 (#ffffff)
- グラデーション効果: 左から右へ濃い青→薄い青

**ログインフォーム**
- 中央配置 (max-width: 400px)
- Material-UI Card コンポーネント
- Shadow elevation: 3

**入力フィールド**
- TextField (Material-UI)
- バリデーション表示（日本語メッセージ）
- user_code: 半角英数字、必須、重複チェック
  - placeholder: "例：user001"
- password: 8文字以上、英数字含む、必須
  - placeholder: "英数字を含む8文字以上"
- エラー表示: フィールド直下に赤文字で日本語メッセージ

**ログインボタン**
- Button (Material-UI)
- variant: contained
- color: primary
- fullWidth: true

**認証・セッション管理**
- **認証方式: Laravel Sanctum（Personal Access Token）**
- トークン有効期限: 3時間
- トークン自動更新: アクティブ時に残り30分で自動延長
- セッション切れ時: 自動的に認証画面へリダイレクト
- セッション警告: 有効期限10分前にアラート表示

---

## 2. スタッフ検索・スタッフ一覧画面

### レイアウト概要
```
┌─────────────────────────────────────────────────────────────┐
│ Header: [ロゴ][アプリ名] [ユーザー名] [ログアウト]                │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │              検索・フィルター エリア                        │ │
│ │ [検索] [フィルター] [ソート] [新規登録] [メール送信]          │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │                 スタッフ一覧テーブル                        │ │
│ │ ☑ │ ID │ 氏名 │ 部署 │ 役職 │ 電話番号 │ メール │ 操作 │ │
│ │ ☑ │ 001│ 山田太郎│ 営業│ 主任│ 090-xxxx│ xxx@xx │ 詳細 │ │
│ │ ☑ │ 002│ 田中花子│ 開発│ SE │ 090-xxxx│ xxx@xx │ 詳細 │ │
│ │ ☑ │ 003│ 佐藤次郎│ 総務│ 係長│ 090-xxxx│ xxx@xx │ 詳細 │ │
│ │ ...                                                     │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │                   ページネーション                          │ │
│ │               [< 前へ] [1] [2] [3] [次へ >]                │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### コンポーネント詳細

**Header**
- AppBar (Material-UI)
- ロゴ＋アプリケーション名 (左)
- ユーザー情報・ログアウト (右)
- 背景色: 青の濃淡グラデーション (#1565c0 - #1976d2)
- ログアウト時: 確認ダイアログ表示

**検索・フィルターエリア**
- Paper (Material-UI)
- 検索フィールド: TextField
  - placeholder: "氏名、メールアドレス、電話番号で検索"
- フィルター: Select, Checkbox
- ソート: Select
- アクションボタン: Button群

**スタッフ一覧テーブル**
- DataGrid (Material-UI)
- チェックボックス: 複数選択対応
- ソート機能: 各列でソート可能
- 行選択: 単一選択時は詳細画面へ遷移

**ページネーション**
- Pagination (Material-UI)
- 1ページ20件表示
- 件数表示: "1-20 of 150 items"

---

## 3. スタッフ詳細・メンテナンス画面

### レイアウト概要
```
┌─────────────────────────────────────────────────────────────┐
│ Header: [ロゴ][アプリ名] [ユーザー名] [ログアウト]                │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ [← 一覧に戻る] スタッフ詳細情報                 [編集] [削除] │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │                   基本情報                                │ │
│ │ ┌─────────────┐ ┌─────────────────────────────────────┐ │ │
│ │ │             │ │ ユーザーコード: [user_code]             │ │ │
│ │ │   顔写真     │ │ 氏名: [name]                          │ │ │
│ │ │             │ │ メール: [email]                       │ │ │
│ │ │             │ │ 役職: [role]                          │ │ │
│ │ └─────────────┘ │ 電話番号: [phone]                     │ │ │
│ │                 │ 携帯電話: [mobile]                     │ │ │
│ │                 └─────────────────────────────────────┘ │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │                   セキュリティ情報                          │ │
│ │ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐     │ │
│ │ │ PC設置環境   │ │セキュリティ   │ │ PCログオン   │     │ │
│ │ │    写真      │ │ソフト稼働写真 │ │ 画面SS      │     │ │
│ │ │             │ │             │ │             │     │ │
│ │ └─────────────┘ └─────────────┘ └─────────────┘     │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │                   操作履歴                                │ │
│ │ 日時         │ 操作者    │ 操作内容                      │ │
│ │ 2025-07-17   │ admin    │ 新規登録                       │ │
│ │ 2025-07-16   │ manager  │ 情報更新                       │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### コンポーネント詳細

**アクション バー**
- Button群: 戻る、編集、削除
- 権限に応じて表示制御
- 削除ボタン: 確認ダイアログ表示
- 編集ボタン: 編集モードへの切り替え確認

**基本情報エリア**
- Grid (Material-UI)
- 顔写真: Avatar または ImageList
- 情報表示: Typography, Chip

**セキュリティ情報エリア**
- ImageList (Material-UI)
- 画像表示: 3x1 グリッド
- 画像クリック: 拡大表示 (Dialog)

**操作履歴**
- Table (Material-UI)
- ページネーション対応
- 日時順ソート

---

## 4. メール送信画面

### レイアウト概要
```
┌─────────────────────────────────────────────────────────────┐
│ Header: [ロゴ][アプリ名] [ユーザー名] [ログアウト]                │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ [← 一覧に戻る] メール送信                    [送信] [下書き] │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │                   送信対象                                │ │
│ │ 選択済みスタッフ: 15名                                      │ │
│ │ [対象者一覧を表示]                                         │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │                   メール作成                               │ │
│ │ 件名: [                                               ] │ │
│ │                                                         │ │
│ │ 本文:                                                   │ │
│ │ ┌─────────────────────────────────────────────────────┐ │ │
│ │ │                                                     │ │ │
│ │ │                                                     │ │ │
│ │ │                                                     │ │ │
│ │ │                                                     │ │ │
│ │ │                                                     │ │ │
│ │ │                                                     │ │ │
│ │ └─────────────────────────────────────────────────────┘ │ │
│ │                                                         │ │
│ │ 添付ファイル: [ファイル選択]                               │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │                   プレビュー                               │ │
│ │ [プレビュー表示エリア]                                      │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### コンポーネント詳細

**送信対象エリア**
- Paper (Material-UI)
- Chip: 選択済み件数表示
- Button: 対象者一覧展開

**メール作成エリア**
- TextField: 件名入力
  - placeholder: "件名を入力してください"
- TextField: 本文入力 (multiline)
  - placeholder: "メール本文を入力してください"
- Button: ファイル選択
- FileList: 添付ファイル一覧
- 送信ボタン: 送信前確認ダイアログ表示

**プレビューエリア**
- Paper (Material-UI)
- 送信前確認用
- リアルタイム更新

---

## 5. 新規登録画面

### レイアウト概要
```
┌─────────────────────────────────────────────────────────────┐
│ Header: [ロゴ][アプリ名] [ユーザー名] [ログアウト]                │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ [← 一覧に戻る] 新規スタッフ登録              [登録] [キャンセル] │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │                   基本情報                                │ │
│ │ ┌─────────────┐ ┌─────────────────────────────────────┐ │ │
│ │ │             │ │ ユーザーコード: [          ] *必須     │ │ │
│ │ │   顔写真     │ │ 氏名: [                    ] *必須     │ │ │
│ │ │  アップロード │ │ メール: [                  ] *必須     │ │ │
│ │ │             │ │ パスワード: [              ] *必須     │ │ │
│ │ │ [ファイル選択] │ │ 役職: [選択                ] *必須     │ │ │
│ │ └─────────────┘ │ 電話番号: [                ]         │ │ │
│ │                 │ 携帯電話: [                ]         │ │ │
│ │                 └─────────────────────────────────────┘ │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │                   セキュリティ情報                          │ │
│ │ PC設置環境写真: [ファイル選択]                               │ │
│ │ セキュリティソフト稼働写真: [ファイル選択]                     │ │
│ │ PCログオン画面SS: [ファイル選択]                            │ │
│ │ 身分証明書写真: [ファイル選択]                               │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │                   入力確認                                │ │
│ │ [入力必須項目のチェック状況表示]                             │ │
│ │ [バリデーションエラー表示]                                   │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### コンポーネント詳細

**基本情報エリア**
- Grid (Material-UI)
- TextField: 各入力フィールド
  - ユーザーコード: placeholder "例：user001"
  - 氏名: placeholder "山田太郎"
  - メール: placeholder "taro.yamada@example.com"
  - パスワード: placeholder "英数字を含む8文字以上"
  - 電話番号: placeholder "03-1234-5678"
  - 携帯電話: placeholder "090-1234-5678"
- Select: 役職選択
  - placeholder: "役職を選択してください"
- 必須項目表示: * マーク
- 登録ボタン: 入力内容確認ダイアログ表示
- キャンセルボタン: 入力破棄確認ダイアログ表示

**セキュリティ情報エリア**
- Button: ファイル選択
- FileList: 選択済みファイル表示
- 画像プレビュー: 選択後に表示

**入力確認エリア**
- Alert (Material-UI)
- バリデーション結果表示（日本語）
- 必須項目チェック状況
- エラー項目の具体的な修正指示

---

## レスポンシブデザイン対応

### タブレット表示 (768px以下)
- サイドバー: 折りたたみ
- テーブル: 横スクロール
- フォーム: 1カラム表示

### スマートフォン表示 (375px以下)
- ナビゲーション: ハンバーガーメニュー
- テーブル: カード形式表示
- フォーム: フルスクリーン

## 使用するMaterial-UIコンポーネント

- **Navigation**: AppBar, Drawer, Tabs
- **Inputs**: TextField, Select, Checkbox, Button, FileInput
- **Data Display**: Table, DataGrid, List, Avatar, Chip
- **Feedback**: Alert, Dialog, Snackbar, CircularProgress, Backdrop
- **Surfaces**: Paper, Card, Accordion
- **Layout**: Grid, Stack, Box, Container
- **Media**: Avatar (ロゴ表示用)

## カラーパレット・デザインシステム

**基本カラーパレット**
```
Primary: #1976d2 (Blue)
Primary Dark: #1565c0 (Dark Blue)
Primary Light: #42a5f5 (Light Blue)
Secondary: #dc004e (Pink)
Success: #2e7d32 (Green)
Warning: #ed6c02 (Orange)
Error: #d32f2f (Red)
Info: #0288d1 (Light Blue)
Background: #f5f5f5 (Light Gray)
Surface: #ffffff (White)
```

**Header・Body デザイン**
- **Header**: 青の濃淡グラデーション (#1565c0 → #1976d2)
- **Body**: 薄い青系背景 (#f3f7ff)
- **Card/Paper**: 白背景 (#ffffff) + 青系のボーダー (#e3f2fd)
- **Button**: 青系統で統一、hover時に濃い青に変化

## アラート・メッセージシステム

**フローティングメッセージボックス**
- **成功メッセージ**: Snackbar (緑) + スライドイン アニメーション
- **エラーメッセージ**: Snackbar (赤) + フェードイン アニメーション
- **警告メッセージ**: Snackbar (オレンジ) + バウンス アニメーション
- **情報メッセージ**: Snackbar (青) + スライドダウン アニメーション
- **セッション警告**: Snackbar (オレンジ) + セッション残り時間表示

**アニメーション仕様**
- 表示時間: 4秒間（自動消去）
- 位置: 画面右上
- 重複時: 縦に積み重ね表示
- 手動閉じる: ×ボタン付き

## 操作確認ダイアログ

**確認が必要な操作**
1. **ログアウト**: "ログアウトしますか？"
2. **データ削除**: "このスタッフ情報を削除しますか？"
3. **メール送信**: "メールを送信しますか？（対象: XX名）"
4. **データ登録**: "この内容で登録しますか？"
5. **入力破棄**: "入力内容を破棄しますか？"
6. **編集モード**: "編集モードに切り替えますか？"
7. **セッション延長**: "セッションが間もなく期限切れになります。延長しますか？"

**ダイアログ仕様**
- Modal Dialog (Material-UI)
- 背景: Backdrop (半透明黒)
- ボタン: キャンセル（グレー）、実行（青）
- アニメーション: フェードイン/アウト
- キーボード操作: ESCキーでキャンセル

## インタラクション・アニメーション

**ボタンインタラクション**
- hover: 色変化 + 軽い影
- click: リップル効果
- disabled: 透明度50%

**テーブル・リストインタラクション**
- 行hover: 薄い青背景
- 選択行: 青背景 + 白文字
- ソート: 矢印アニメーション

**フォームインタラクション**
- フォーカス: 青のアウトライン
- エラー: 赤のアウトライン + 振動効果
- 成功: 緑のアウトライン + チェックアイコン

## バリデーション・エラーメッセージ日本語化

**基本バリデーションメッセージ**
```javascript
// 必須項目
required: "この項目は必須です"

// 文字数制限
minLength: "最低{min}文字以上で入力してください"
maxLength: "最大{max}文字以内で入力してください"

// パターンマッチング
pattern: "正しい形式で入力してください"

// メールアドレス
email: "正しいメールアドレスを入力してください"

// 数値
min: "{min}以上の数値を入力してください"
max: "{max}以下の数値を入力してください"

// カスタムバリデーション
userCodeDuplicate: "このユーザーコードは既に使用されています"
passwordWeak: "パスワードは英数字を含む8文字以上で入力してください"
```

**項目別バリデーションメッセージ**
- **ユーザーコード**: 
  - 必須: "ユーザーコードを入力してください"
  - 形式: "半角英数字で入力してください"
  - 重複: "このユーザーコードは既に使用されています"
  - placeholder: "例：user001"
- **氏名**: 
  - 必須: "氏名を入力してください"
  - 文字数: "氏名は50文字以内で入力してください"
  - placeholder: "山田太郎"
- **メールアドレス**: 
  - 必須: "メールアドレスを入力してください"
  - 形式: "正しいメールアドレスを入力してください"
  - 重複: "このメールアドレスは既に登録されています"
  - placeholder: "taro.yamada@example.com"
- **パスワード**: 
  - 必須: "パスワードを入力してください"
  - 強度: "パスワードは英数字を含む8文字以上で入力してください"
  - placeholder: "英数字を含む8文字以上"
- **電話番号**: 
  - 形式: "正しい電話番号を入力してください（例：03-1234-5678）"
  - placeholder: "03-1234-5678"
- **携帯電話**: 
  - 形式: "正しい携帯電話番号を入力してください（例：090-1234-5678）"
  - placeholder: "090-1234-5678"

**ファイルアップロードバリデーション**
- **ファイル形式**: "対応ファイル形式: JPG, PNG, PDF"
- **ファイルサイズ**: "ファイルサイズは{maxSize}MB以内にしてください"
- **必須ファイル**: "顔写真をアップロードしてください"

**リアルタイムバリデーション**
- 入力中: 文字数カウンター表示
- フォーカス離脱時: 即座にバリデーション実行
- 送信前: 全項目の最終バリデーション

**バリデーション表示仕様**
- 位置: 入力フィールド直下
- 色: エラー (#d32f2f)
- アイコン: 警告アイコン付き
- アニメーション: フェードイン表示

**placeholder仕様**
- 色: グレー (#9e9e9e)
- フォントスタイル: 通常テキストより薄い
- フォーカス時: 自動的に非表示
- 入力開始時: 自動的に非表示
- 具体的な入力例を提示してユーザビリティを向上

## 認証・セッション管理システム

**Laravel Sanctum による認証**
- **トークン発行**: ログイン成功時にPersonal Access Tokenを発行
- **トークン有効期限**: 3時間（180分）
- **トークン格納**: ブラウザのlocalStorageに安全に保存
- **API通信**: 全てのAPIリクエストにBearerトークンを付与
- **CSRF保護**: Sanctumの標準CSRF保護機能を利用

**セッション管理**
- **自動延長**: アクティブ時に残り30分で自動延長（新しいトークン発行）
- **セッション監視**: 1分間隔でトークン有効期限をチェック
- **アクティビティ検出**: マウス操作、キーボード操作、API通信を検出
- **セッション切れ**: 期限切れ時に自動的に認証画面へリダイレクト
- **ブラウザ履歴制御**: 認証後は戻るボタンで認証画面に戻れないよう制御

**セッション切れ対応**
- **10分前警告**: "セッションが間もなく期限切れになります。延長しますか？"
- **5分前警告**: "セッションが5分後に期限切れになります"
- **自動ログアウト**: 期限切れ時に自動的に認証画面へリダイレクト
- **作業中データ保護**: 入力中のデータは一時保存してセッション復旧後に復元
- **ブラウザ履歴管理**: 認証後は history.replaceState() で戻る操作を制御

**セッション表示**
- **セッション状況**: 通常時は表示なし
- **警告時のみ**: セッション延長確認ダイアログ表示
- **期限切れ時**: 認証画面への自動リダイレクト

**セキュリティ対策**
- **トークン暗号化**: Sanctumの標準的な暗号化機能を利用
- **CSRF対策**: Sanctumの内蔵CSRF保護とCSRFトークンを併用
- **XSS対策**: トークンの適切な保存と送信（httpOnlyオプション併用）
- **ブラウザ閉じた時**: トークンを自動削除（sessionStorage利用）
- **履歴制御**: 認証後の戻るボタンで認証画面に戻れないよう制御
- **ページ更新制御**: 認証状態の確認と維持
- **トークン無効化**: ログアウト時にサーバーサイドでトークンを無効化

**Laravel Sanctum の利点**
- **Laravel標準**: Laravel公式の認証システム
- **SPA最適化**: Single Page Applicationに最適化された設計
- **セキュリティ**: 標準的なセキュリティ機能が組み込み済み
- **簡単実装**: 複雑な設定なしで安全な認証が可能
- **トークン管理**: サーバーサイドでのトークン管理・無効化が可能
- **CSRF保護**: 標準でCSRF攻撃に対する保護機能を提供
- **レート制限**: API呼び出し制限機能が組み込み済み

## ローディング・プログレス

**ローディング表示**
- 全画面: CircularProgress + Backdrop
- 部分的: LinearProgress (青)
- ボタン内: 小さなSpinner

**プログレス表示**
- ファイルアップロード: 進捗バー
- データ処理: ステップ式プログレス
- 検索結果: スケルトンローディング

## ロゴ仕様

**ロゴ配置**
- 位置: Header左端（アプリケーション名の左側）
- サイズ: 40x40px (デスクトップ) / 32x32px (モバイル)
- フォーマット: SVG推奨（PNG/JPEGも対応）
- 余白: 左右8px

**ロゴデザイン要件**
- 背景透過
- 単色またはシンプルな配色
- 視認性を考慮したコントラスト
- レスポンシブ対応（サイズ自動調整）

## カラーパレット

**廃止**: 以下の内容は上記「カラーパレット・デザインシステム」セクションに統合されました。

## アクセシビリティ考慮事項

- **キーボードナビゲーション**: Tab順序の最適化
- **スクリーンリーダー**: ARIA属性の適切な設定
- **コントラスト**: WCAG 2.1 AA準拠（青系統での十分なコントラスト確保）
- **フォーカス**: 視覚的インジケーターの提供（青のアウトライン）
- **カラーバリアフリー**: 色以外でも情報を判別可能
- **アニメーション**: 視覚的な負担を軽減する設定
