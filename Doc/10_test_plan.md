# 総合テスト計画書

このドキュメントでは、スタッフ管理システムの総合テスト計画について詳細に説明します。

## テスト概要

### テスト目的
- **機能の正確性**: 仕様通りの機能が実装されているか
- **セキュリティ**: 不正アクセスや脆弱性が存在しないか
- **ユーザビリティ**: 使いやすさと直感性
- **パフォーマンス**: 応答時間とスループット
- **互換性**: 異なるブラウザ・デバイスでの動作

### テスト環境
- **テスト環境**: ローカル開発環境 + ステージング環境
- **ブラウザ**: Chrome, Firefox, Safari, Edge
- **デバイス**: デスクトップ、タブレット、スマートフォン
- **OS**: Windows 10/11, macOS, Linux (Ubuntu)

## テスト戦略

### テストレベル
1. **機能テスト**: 基本機能の動作確認
2. **統合テスト**: モジュール間の連携確認
3. **システムテスト**: 全体システムの動作確認
4. **セキュリティテスト**: セキュリティ要件の確認
5. **ユーザビリティテスト**: UI/UXの確認
6. **パフォーマンステスト**: 性能要件の確認

### テスト手法
- **手動テスト**: 探索的テスト、ユーザビリティテスト
- **自動テスト**: 回帰テスト、APIテスト
- **負荷テスト**: 同時アクセス、大量データ処理
- **セキュリティテスト**: 脆弱性スキャン、侵入テスト

## 機能テスト

### 認証機能テスト

#### TC-001: ログイン機能
**目的**: 正しい認証情報でログインできることを確認

**前提条件**:
- 有効なユーザーアカウントが存在する
- システムが正常に動作している

**テスト手順**:
1. ログイン画面を開く
2. 正しいユーザーコードを入力
3. 正しいパスワードを入力
4. ログインボタンをクリック

**期待結果**:
- ログイン成功メッセージが表示される
- スタッフ一覧画面にリダイレクトされる
- ヘッダーにユーザー情報が表示される

**テストデータ**:
```
user_code: test001
password: TestPass123
```

#### TC-002: ログイン失敗
**目的**: 誤った認証情報でログインが拒否されることを確認

**テスト手順**:
1. ログイン画面を開く
2. 誤ったユーザーコードまたはパスワードを入力
3. ログインボタンをクリック

**期待結果**:
- エラーメッセージが表示される
- ログイン画面にとどまる
- セキュリティログに記録される

#### TC-003: セッション管理
**目的**: セッションタイムアウトが正しく動作することを確認

**テスト手順**:
1. ログイン後、3時間経過を待つ
2. 任意の操作を実行

**期待結果**:
- セッションタイムアウトメッセージが表示される
- ログイン画面にリダイレクトされる

### スタッフ管理機能テスト

#### TC-004: スタッフ一覧表示
**目的**: スタッフ一覧が正しく表示されることを確認

**テスト手順**:
1. ログイン後、スタッフ一覧画面を開く
2. 表示されるスタッフ情報を確認

**期待結果**:
- スタッフ一覧が表示される
- ページネーションが機能する
- ソート機能が動作する

#### TC-005: スタッフ検索
**目的**: 検索機能が正しく動作することを確認

**テスト手順**:
1. スタッフ一覧画面で検索フィールドにキーワードを入力
2. 検索ボタンをクリック

**期待結果**:
- 検索条件に一致するスタッフが表示される
- 検索結果が0件の場合、適切なメッセージが表示される

#### TC-006: スタッフ新規登録
**目的**: 新しいスタッフを正しく登録できることを確認

**テスト手順**:
1. 新規登録画面を開く
2. 必須項目を入力
3. 登録ボタンをクリック

**期待結果**:
- 登録成功メッセージが表示される
- スタッフ一覧に新しいスタッフが表示される
- データベースに正しく保存される

**テストデータ**:
```
user_code: test002
name: テストユーザー
email: test@example.com
password: TestPass123
role: スタッフ
```

#### TC-007: スタッフ情報更新
**目的**: スタッフ情報を正しく更新できることを確認

**テスト手順**:
1. スタッフ詳細画面を開く
2. 編集ボタンをクリック
3. 情報を変更して保存

**期待結果**:
- 更新成功メッセージが表示される
- 変更内容が反映される
- 更新ログが記録される

#### TC-008: スタッフ削除
**目的**: スタッフを正しく削除できることを確認

**テスト手順**:
1. スタッフ詳細画面を開く
2. 削除ボタンをクリック
3. 確認ダイアログで削除を確認

**期待結果**:
- 削除確認ダイアログが表示される
- 削除が実行される
- スタッフ一覧から削除される

### メール送信機能テスト

#### TC-009: メール一括送信
**目的**: 複数のスタッフにメールを送信できることを確認

**テスト手順**:
1. スタッフ一覧で複数のスタッフを選択
2. メール送信画面を開く
3. 件名・本文を入力
4. 送信ボタンをクリック

**期待結果**:
- メール送信が成功する
- 送信履歴が記録される
- 受信者にメールが届く

#### TC-010: メール送信履歴
**目的**: メール送信履歴が正しく表示されることを確認

**テスト手順**:
1. メール送信履歴画面を開く
2. 履歴一覧を確認

**期待結果**:
- 送信履歴が時系列で表示される
- 送信者、受信者、件名が表示される
- 送信状況が確認できる

## セキュリティテスト

### 認証・認可テスト

#### TC-011: 未認証アクセス防止
**目的**: 認証なしでは保護されたページにアクセスできないことを確認

**テスト手順**:
1. ログインせずに保護されたURLに直接アクセス
2. 応答を確認

**期待結果**:
- セキュリティエラーページが表示される
- 認証画面にリダイレクトされる
- セキュリティログに記録される

#### TC-012: 権限による制御
**目的**: 役職に応じた権限制御が正しく動作することを確認

**テスト手順**:
1. 一般スタッフでログイン
2. 管理者限定機能にアクセス

**期待結果**:
- アクセス拒否メッセージが表示される
- 操作が実行されない
- 権限エラーがログに記録される

### 入力値検証テスト

#### TC-013: SQLインジェクション
**目的**: SQLインジェクション攻撃が防がれることを確認

**テスト手順**:
1. 入力フィールドに悪意のあるSQLを入力
2. 送信ボタンをクリック

**テストデータ**:
```
'; DROP TABLE users; --
' OR '1'='1
UNION SELECT * FROM users
```

**期待結果**:
- 入力値が適切にエスケープされる
- データベースに影響がない
- エラーが適切に処理される

#### TC-014: XSS攻撃防止
**目的**: XSS攻撃が防がれることを確認

**テスト手順**:
1. 入力フィールドにJavaScriptコードを入力
2. データを保存・表示

**テストデータ**:
```
<script>alert('XSS')</script>
<img src=x onerror=alert('XSS')>
```

**期待結果**:
- スクリプトが実行されない
- 適切にエスケープされる
- HTMLタグが無効化される

### セッション管理テスト

#### TC-015: セッション固定攻撃防止
**目的**: セッション固定攻撃が防がれることを確認

**テスト手順**:
1. セッションIDを事前に取得
2. そのセッションIDでログイン試行

**期待結果**:
- ログイン時にセッションIDが再生成される
- 古いセッションIDは無効化される

#### TC-016: セッションハイジャック防止
**目的**: セッションハイジャック攻撃が防がれることを確認

**テスト手順**:
1. 他のIPアドレスから同じセッションでアクセス
2. 異なるUser-Agentでアクセス

**期待結果**:
- セッションが無効化される
- 再認証が要求される
- セキュリティログに記録される

## ユーザビリティテスト

### UI/UX テスト

#### TC-017: レスポンシブデザイン
**目的**: 異なるデバイスサイズで正しく表示されることを確認

**テスト手順**:
1. デスクトップブラウザで表示
2. タブレットサイズで表示
3. スマートフォンサイズで表示

**期待結果**:
- 各デバイスで適切にレイアウトされる
- 全ての機能が利用可能
- 文字が読みやすい

#### TC-018: ナビゲーション
**目的**: ナビゲーションが直感的で使いやすいことを確認

**テスト手順**:
1. 各画面を順番に遷移
2. 戻るボタンの動作確認
3. パンくずリストの確認

**期待結果**:
- 画面遷移がスムーズ
- ユーザーが迷わない
- 一貫性のあるUI

### アクセシビリティテスト

#### TC-019: キーボードナビゲーション
**目的**: キーボードのみで操作できることを確認

**テスト手順**:
1. マウスを使わずにTabキーで移動
2. Enterキーで操作実行
3. Escキーでキャンセル

**期待結果**:
- 全ての操作がキーボードで可能
- フォーカスが分かりやすい
- 論理的なTab順序

#### TC-020: カラーコントラスト
**目的**: 色覚に配慮した表示になっていることを確認

**テスト手順**:
1. カラーコントラストをチェック
2. 色覚シミュレーションで確認

**期待結果**:
- WCAG 2.1 AA基準を満たす
- 色以外でも情報が判別可能
- 読みやすい配色

## パフォーマンステスト

### 負荷テスト

#### TC-021: 同時アクセス
**目的**: 複数ユーザーの同時アクセスに対応できることを確認

**テスト条件**:
- 同時接続数: 50ユーザー
- 継続時間: 30分
- 操作パターン: ログイン → 一覧表示 → 詳細表示

**期待結果**:
- レスポンス時間: 2秒以内
- エラー率: 1%以下
- システムが安定稼働

#### TC-022: 大量データ処理
**目的**: 大量のデータを処理できることを確認

**テスト条件**:
- スタッフ数: 1000件
- 一括メール送信: 100件
- 検索処理: 全件検索

**期待結果**:
- 処理時間が許容範囲内
- メモリ使用量が適切
- システムが応答を維持

### レスポンス時間テスト

#### TC-023: 画面表示時間
**目的**: 各画面の表示時間が適切であることを確認

**測定項目**:
- ログイン画面: 1秒以内
- スタッフ一覧: 2秒以内
- 詳細画面: 1.5秒以内
- 検索結果: 3秒以内

**期待結果**:
- 全ての画面が目標時間内に表示
- ローディング表示が適切
- ユーザーストレスが最小

## 互換性テスト

### ブラウザ互換性

#### TC-024: 各ブラウザでの動作確認
**目的**: 主要ブラウザで正しく動作することを確認

**テスト対象**:
- Chrome (最新版)
- Firefox (最新版)
- Safari (最新版)
- Edge (最新版)

**期待結果**:
- 全ての機能が正常動作
- レイアウトが正しい
- エラーが発生しない

### デバイス互換性

#### TC-025: 各デバイスでの動作確認
**目的**: 異なるデバイスで正しく動作することを確認

**テスト対象**:
- Windows PC
- Mac
- iPad
- iPhone
- Android端末

**期待結果**:
- タッチ操作が正常
- 文字入力が適切
- パフォーマンスが良好

## テスト実行計画

### テストスケジュール

#### Phase 1: 基本機能テスト (1週間)
- 認証機能テスト
- スタッフ管理機能テスト
- メール送信機能テスト

#### Phase 2: セキュリティテスト (3日間)
- 認証・認可テスト
- 入力値検証テスト
- セッション管理テスト

#### Phase 3: ユーザビリティ・パフォーマンステスト (3日間)
- UI/UXテスト
- アクセシビリティテスト
- 負荷テスト

#### Phase 4: 互換性テスト (2日間)
- ブラウザ互換性テスト
- デバイス互換性テスト

### 品質基準

#### 合格基準
- 機能テスト: 100%成功
- セキュリティテスト: 100%成功
- ユーザビリティテスト: 90%以上満足
- パフォーマンステスト: 目標値以内
- 互換性テスト: 主要環境で100%動作

#### 不合格時の対応
1. 問題の原因分析
2. 修正作業の実施
3. 再テストの実行
4. 影響範囲の確認

## テスト報告

### テスト結果報告書
- テスト実行結果
- 発見された問題
- 修正状況
- 品質評価

### 最終承認
- 開発チーム確認
- 品質保証確認
- ステークホルダー承認
- 本番リリース承認

## テスト環境管理

### テストデータ管理
- テスト用ユーザーアカウント
- サンプルデータの準備
- データベースの初期化

### テスト環境の構築
- 本番環境と同等の設定
- テスト用データベース
- 監視・ログ設定

### テスト実行環境
- 自動テスト実行環境
- 手動テスト実行環境
- テスト結果の保存・管理
